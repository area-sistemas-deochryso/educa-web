<div class="login-overlay">
	<div class="login-modal">
		<div class="login-header">
			<h2>INICIAR SESIÓN</h2>
			<img src="images/logo.png" alt="Educa.com Logo" class="login-logo" />
		</div>

		<form class="login-form" (ngSubmit)="onLogin()" autocomplete="on">
			@if (showError) {
				<div class="error-message">
					<i class="pi pi-exclamation-circle"></i>
					<span>{{ errorMessage }}</span>
				</div>
			}

			<div class="input-group">
				<i class="pi pi-id-card"></i>
				<input
					type="text"
					pInputText
					placeholder="DNI"
					[(ngModel)]="dni"
					name="dni"
					autocomplete="username"
					[disabled]="isBlocked || isLoading"
					maxlength="8"
					pattern="[0-9]*"
				/>
			</div>

			<div class="input-group">
				<i
					class="pi password-toggle"
					[class.pi-lock]="!showPassword"
					[class.pi-lock-open]="showPassword"
					(click)="togglePasswordVisibility()"
				></i>
				<input
					[type]="showPassword ? 'text' : 'password'"
					pInputText
					placeholder="Contraseña"
					[(ngModel)]="password"
					name="password"
					autocomplete="current-password"
					[disabled]="isBlocked || isLoading"
				/>
			</div>

			<div class="input-group">
				<i class="pi pi-users"></i>
				<p-select
					[options]="roles"
					[(ngModel)]="selectedRol"
					name="rol"
					optionLabel="label"
					optionValue="value"
					placeholder="Seleccione rol"
					[disabled]="isBlocked || isLoading"
					class="w-full"
				/>
			</div>

			<div class="options-row">
				<label class="remember-checkbox">
					<p-checkbox [(ngModel)]="rememberMe" [binary]="true" name="remember" />
					<span>Recordar sesión</span>
				</label>
				<a href="#" class="forgot-link">¿Ha olvidado la contraseña?</a>
			</div>

			<div class="button-row">
				<button type="submit" class="login-btn" [disabled]="isBlocked || isLoading">
					@if (isLoading) {
						<span class="btn-label">Ingresando...</span>
						<span class="btn-icon">
							<i class="pi pi-spin pi-spinner"></i>
						</span>
					} @else {
						<span class="btn-label">Ingresar</span>
						<span class="btn-icon">
							<i class="pi pi-arrow-right"></i>
						</span>
					}
				</button>
			</div>
		</form>
	</div>
</div>
