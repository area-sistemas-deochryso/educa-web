<app-attendance-legend />

@if (salones().length > 0) {
	<app-salon-selector
		[salones]="salones()"
		[selectedSalonId]="selectedSalonId()"
		[nombreProfesor]="nombreProfesor()"
		(salonChange)="viewMode() === 'dia' ? selectSalonDia($event) : selectSalon($event)"
	/>

	@if (viewMode() === 'mes') {
		@if (estudiantes().length > 0) {
			<app-attendance-table
				[table]="ingresos()"
				[hijos]="estudiantesAsHijos()"
				[selectedHijoId]="selectedEstudianteId()"
				(monthChange)="onIngresosMonthChange($event)"
				(hijoChange)="selectEstudiante($event)"
			/>
			<app-attendance-table
				[table]="salidas()"
				[hijos]="estudiantesAsHijos()"
				[selectedHijoId]="selectedEstudianteId()"
				(monthChange)="onSalidasMonthChange($event)"
				(hijoChange)="selectEstudiante($event)"
			/>
		} @else if (!loading()) {
			<app-empty-state message="No se encontraron estudiantes en este salÃ³n." />
		}
	} @else {
		<app-asistencia-dia-list
			[estudiantes]="estudiantesDia()"
			[fecha]="fechaDia()"
			[loading]="loading()"
			(fechaChange)="onFechaDiaChange($event)"
		/>
	}
} @else if (!loading()) {
	<app-empty-state message="No tiene salones asignados." />
}
